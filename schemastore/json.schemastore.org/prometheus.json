{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://json.schemastore.org/prometheus.json","title":"Prometheus","type":["object","null"],"properties":{"global":{"type":["object","null"],"properties":{"scrape_interval":{"$ref":"#/definitions/duration","default":"1m"},"scrape_timeout":{"$ref":"#/definitions/duration","default":"10s"},"evaluation_interval":{"$ref":"#/definitions/duration","default":"1m"},"external_labels":{"$ref":"#/definitions/labels"},"query_log_file":{"$ref":"#/definitions/filepath"}},"additionalProperties":false},"rule_files":{"type":["array","null"],"items":{"$ref":"#/definitions/filepath_glob"}},"remote_write":{"type":["array","null"],"items":{"type":"object","properties":{"url":{"type":"string","format":"uri-reference"},"remote_timeout":{"$ref":"#/definitions/duration","default":"30s"},"headers":{"type":["object","null"],"additionalProperties":{"type":"string"}},"write_relabel_configs":{"$ref":"#/definitions/relabel_configs"},"name":{"type":["string","null"]},"send_exemplars":{"type":["boolean","null"],"default":false},"basic_auth":{"$ref":"#/definitions/basic_auth"},"authorization":{"$ref":"#/definitions/authorization"},"sigv4":{"$ref":"#/definitions/sigv4"},"oauth2":{"$ref":"#/definitions/oauth2"},"bearer_token":{"$ref":"#/definitions/bearer_token"},"bearer_token_file":{"$ref":"#/definitions/bearer_token_file"},"tls_config":{"$ref":"#/definitions/tls_config"},"proxy_url":{"type":["string","null"],"format":"uri-reference"},"follow_redirects":{"type":["boolean","null"],"default":true},"queue_config":{"type":["object","null"],"properties":{"capacity":{"type":["integer","null"],"default":2500},"max_shards":{"type":["integer","null"],"default":200},"min_shards":{"type":["integer","null"],"default":1},"max_samples_per_send":{"type":["integer","null"],"default":500},"batch_send_deadline":{"$ref":"#/definitions/duration","default":"5s"},"min_backoff":{"$ref":"#/definitions/duration","default":"30ms"},"max_backoff":{"$ref":"#/definitions/duration","default":"5s"},"retry_on_http_429":{"type":["boolean","null"],"default":false}},"additionalProperties":false},"metadata_config":{"type":["object","null"],"properties":{"send":{"type":["boolean","null"],"default":true},"send_interval":{"$ref":"#/definitions/duration","default":"1m"},"max_samples_per_send":{"type":["integer","null"],"default":500}},"additionalProperties":false}},"allOf":[{"$ref":"#/definitions/auth"}],"additionalProperties":false,"required":["url"]}},"remote_read":{"type":["array","null"],"items":{"type":"object","properties":{"url":{"type":"string","format":"uri-reference"},"name":{"type":["string","null"]},"required_matchers":{"$ref":"#/definitions/labels"},"remote_timeout":{"$ref":"#/definitions/duration","default":"1m"},"headers":{"type":["object","null"],"additionalProperties":{"type":"string"}},"read_recent":{"type":["boolean","null"],"default":false},"basic_auth":{"$ref":"#/definitions/basic_auth"},"authorization":{"$ref":"#/definitions/authorization"},"oauth2":{"$ref":"#/definitions/oauth2"},"bearer_token":{"$ref":"#/definitions/bearer_token"},"bearer_token_file":{"$ref":"#/definitions/bearer_token_file"},"tls_config":{"$ref":"#/definitions/tls_config"},"proxy_url":{"type":["string","null"],"format":"uri-reference"},"follow_redirects":{"type":["boolean","null"],"default":true}},"allOf":[{"$ref":"#/definitions/auth"}],"additionalProperties":false,"required":["url"]}},"scrape_configs":{"type":["array","null"],"items":{"type":"object","properties":{"job_name":{"type":"string"},"scrape_interval":{"$ref":"#/definitions/duration"},"scrape_timeout":{"$ref":"#/definitions/duration"},"metrics_path":{"type":["string","null"],"default":"/metrics"},"honor_labels":{"type":["boolean","null"],"default":false},"honor_timestamps":{"type":["boolean","null"],"default":true},"scheme":{"$ref":"#/definitions/scheme","default":"http"},"params":{"type":["object","null"],"additionalProperties":{"type":"array","items":{"type":"string"}}},"basic_auth":{"$ref":"#/definitions/basic_auth"},"authorization":{"$ref":"#/definitions/authorization"},"oauth2":{"$ref":"#/definitions/oauth2"},"bearer_token":{"$ref":"#/definitions/bearer_token"},"bearer_token_file":{"$ref":"#/definitions/bearer_token_file"},"follow_redirects":{"type":["boolean","null"],"default":true},"tls_config":{"$ref":"#/definitions/tls_config"},"proxy_url":{"type":["string","null"],"format":"uri-reference"},"azure_sd_configs":{"$ref":"#/definitions/azure_sd_configs"},"consul_sd_configs":{"$ref":"#/definitions/consul_sd_configs"},"digitalocean_sd_configs":{"$ref":"#/definitions/digitalocean_sd_configs"},"docker_sd_configs":{"$ref":"#/definitions/docker_sd_configs"},"dockerswarm_sd_configs":{"$ref":"#/definitions/dockerswarm_sd_configs"},"dns_sd_configs":{"$ref":"#/definitions/dns_sd_configs"},"ec2_sd_configs":{"$ref":"#/definitions/ec2_sd_configs"},"eureka_sd_configs":{"$ref":"#/definitions/eureka_sd_configs"},"file_sd_configs":{"$ref":"#/definitions/file_sd_configs"},"gce_sd_configs":{"$ref":"#/definitions/gce_sd_configs"},"hetzner_sd_configs":{"$ref":"#/definitions/hetzner_sd_configs"},"http_sd_configs":{"$ref":"#/definitions/http_sd_configs"},"kubernetes_sd_configs":{"$ref":"#/definitions/kubernetes_sd_configs"},"kuma_sd_configs":{"$ref":"#/definitions/kuma_sd_configs"},"lightsail_sd_configs":{"$ref":"#/definitions/lightsail_sd_configs"},"linode_sd_configs":{"$ref":"#/definitions/linode_sd_configs"},"marathon_sd_configs":{"$ref":"#/definitions/marathon_sd_configs"},"nerve_sd_configs":{"$ref":"#/definitions/nerve_sd_configs"},"openstack_sd_configs":{"$ref":"#/definitions/openstack_sd_configs"},"puppetdb_sd_configs":{"$ref":"#/definitions/puppetdb_sd_configs"},"scaleway_sd_configs":{"$ref":"#/definitions/scaleway_sd_configs"},"serverset_sd_configs":{"$ref":"#/definitions/serverset_sd_configs"},"triton_sd_configs":{"$ref":"#/definitions/triton_sd_configs"},"uyuni_sd_configs":{"$ref":"#/definitions/uyuni_sd_configs"},"static_configs":{"$ref":"#/definitions/static_configs"},"relabel_configs":{"$ref":"#/definitions/relabel_configs"},"metric_relabel_configs":{"$ref":"#/definitions/relabel_configs"},"body_size_limit":{"type":["integer","null"],"default":0},"sample_limit":{"type":["integer","null"],"default":0},"label_limit":{"type":["integer","null"],"default":0},"label_name_length_limit":{"type":["integer","null"],"default":0},"label_value_length_limit":{"type":["integer","null"],"default":0},"target_limit":{"type":["integer","null"],"default":0}},"allOf":[{"$ref":"#/definitions/auth"}],"additionalProperties":false,"required":["job_name"]}},"alerting":{"type":["object","null"],"properties":{"alert_relabel_configs":{"$ref":"#/definitions/relabel_configs"},"alertmanagers":{"type":["array","null"],"items":{"type":"object","properties":{"timeout":{"$ref":"#/definitions/duration","default":"10s"},"api_version":{"type":["string","null"],"default":"v2"},"path_prefix":{"type":["string","null"],"default":"/"},"scheme":{"$ref":"#/definitions/scheme","default":"http"},"basic_auth":{"$ref":"#/definitions/basic_auth"},"authorization":{"$ref":"#/definitions/authorization"},"oauth2":{"$ref":"#/definitions/oauth2"},"bearer_token":{"$ref":"#/definitions/bearer_token"},"bearer_token_file":{"$ref":"#/definitions/bearer_token_file"},"tls_config":{"$ref":"#/definitions/tls_config"},"proxy_url":{"type":["string","null"],"format":"uri-reference"},"follow_redirects":{"type":["boolean","null"],"default":true},"azure_sd_configs":{"$ref":"#/definitions/azure_sd_configs"},"consul_sd_configs":{"$ref":"#/definitions/consul_sd_configs"},"digitalocean_sd_configs":{"$ref":"#/definitions/digitalocean_sd_configs"},"docker_sd_configs":{"$ref":"#/definitions/docker_sd_configs"},"dockerswarm_sd_configs":{"$ref":"#/definitions/dockerswarm_sd_configs"},"dns_sd_configs":{"$ref":"#/definitions/dns_sd_configs"},"ec2_sd_configs":{"$ref":"#/definitions/ec2_sd_configs"},"eureka_sd_configs":{"$ref":"#/definitions/eureka_sd_configs"},"file_sd_configs":{"$ref":"#/definitions/file_sd_configs"},"gce_sd_configs":{"$ref":"#/definitions/gce_sd_configs"},"hetzner_sd_configs":{"$ref":"#/definitions/hetzner_sd_configs"},"http_sd_configs":{"$ref":"#/definitions/http_sd_configs"},"kubernetes_sd_configs":{"$ref":"#/definitions/kubernetes_sd_configs"},"kuma_sd_configs":{"$ref":"#/definitions/kuma_sd_configs"},"lightsail_sd_configs":{"$ref":"#/definitions/lightsail_sd_configs"},"linode_sd_configs":{"$ref":"#/definitions/linode_sd_configs"},"marathon_sd_configs":{"$ref":"#/definitions/marathon_sd_configs"},"nerve_sd_configs":{"$ref":"#/definitions/nerve_sd_configs"},"openstack_sd_configs":{"$ref":"#/definitions/openstack_sd_configs"},"puppetdb_sd_configs":{"$ref":"#/definitions/puppetdb_sd_configs"},"scaleway_sd_configs":{"$ref":"#/definitions/scaleway_sd_configs"},"serverset_sd_configs":{"$ref":"#/definitions/serverset_sd_configs"},"triton_sd_configs":{"$ref":"#/definitions/triton_sd_configs"},"uyuni_sd_configs":{"$ref":"#/definitions/uyuni_sd_configs"},"static_configs":{"$ref":"#/definitions/static_configs"},"relabel_configs":{"$ref":"#/definitions/relabel_configs"}},"allOf":[{"$ref":"#/definitions/auth"}]}}}},"storage":{"type":["array","null"],"items":{"type":"object","properties":{"max_exemplars":{"type":["integer","null"],"default":100000}},"additionalProperties":false}}},"additionalProperties":false,"definitions":{"duration":{"type":["string","null"],"pattern":"^[0-9]+(ms|[smhdwy])$"},"label_name":{"type":"string","pattern":"^[a-zA-Z_][a-zA-Z0-9_]*$"},"label_value":{"type":"string"},"labels":{"type":["object","null"],"patternProperties":{"^[a-zA-Z_][a-zA-Z0-9_]*$":{"$ref":"#/definitions/label_value"}},"additionalProperties":false},"filepath_glob":{"type":"string"},"filepath":{"type":["string","null"],"format":"uri-reference"},"basic_auth":{"type":["object","null"],"properties":{"username":{"type":"string"},"password":{"type":["string","null"]},"password_file":{"$ref":"#/definitions/filepath"}},"oneOf":[{"required":["password"]},{"required":["password_file"]}],"additionalProperties":false,"required":["username"]},"authorization":{"type":["object","null"],"properties":{"type":{"type":["string","null"],"default":"Bearer"},"credentials":{"type":["string","null"]},"credentials_file":{"$ref":"#/definitions/filepath"}},"oneOf":[{"required":["credentials"]},{"required":["credentials_file"]}],"additionalProperties":false},"sigv4":{"type":["object","null"],"properties":{"region":{"type":["string","null"]},"access_key":{"type":["string","null"]},"secret_key":{"type":["string","null"]},"profile":{"type":["string","null"]},"role_arn":{"type":["string","null"]}},"additionalProperties":false},"oauth2":{"type":["object","null"],"properties":{"client_id":{"type":["string"]},"client_secret":{"type":["string","null"]},"client_secret_file":{"$ref":"#/definitions/filepath"},"scopes":{"type":["array","null"],"items":{"type":["string","null"]}},"token_url":{"type":["string"]},"endpoint_params":{"type":["object","null"],"additionalProperties":{"type":"string"}},"tls_config":{"$ref":"#/definitions/tls_config"}},"oneOf":[{"required":["client_secret"]},{"required":["client_secret_file"]}],"additionalProperties":false,"required":["client_id","token_url"]},"bearer_token":{"type":["string","null"]},"bearer_token_file":{"$ref":"#/definitions/filepath"},"auth":{"allOf":[{"if":{"not":{"properties":{"basic_auth":{"const":null}}}},"then":{"properties":{"authorization":{"const":null},"sigv4":{"const":null},"oauth2":{"const":null},"bearer_token":{"const":null},"bearer_token_file":{"const":null}}}},{"if":{"not":{"properties":{"authorization":{"const":null}}}},"then":{"properties":{"basic_auth":{"const":null},"sigv4":{"const":null},"oauth2":{"const":null},"bearer_token":{"const":null},"bearer_token_file":{"const":null}}}},{"if":{"not":{"properties":{"sigv4":{"const":null}}}},"then":{"properties":{"basic_auth":{"const":null},"authorization":{"const":null},"oauth2":{"const":null},"bearer_token":{"const":null},"bearer_token_file":{"const":null}}}},{"if":{"not":{"properties":{"oauth2":{"const":null}}}},"then":{"properties":{"basic_auth":{"const":null},"authorization":{"const":null},"sigv4":{"const":null},"bearer_token":{"const":null},"bearer_token_file":{"const":null}}}},{"if":{"not":{"properties":{"bearer_token":{"const":null}}}},"then":{"properties":{"basic_auth":{"const":null},"authorization":{"const":null},"sigv4":{"const":null},"oauth2":{"const":null},"bearer_token_file":{"const":null}}}},{"if":{"not":{"properties":{"bearer_token_file":{"const":null}}}},"then":{"properties":{"basic_auth":{"const":null},"authorization":{"const":null},"sigv4":{"const":null},"oauth2":{"const":null},"bearer_token":{"const":null}}}}]},"relabel_configs":{"type":["array","null"],"items":{"type":"object","properties":{"source_labels":{"type":"array","items":{"$ref":"#/definitions/label_name"}},"separator":{"type":"string","default":";"},"target_label":{"$comment":"https://github.com/prometheus/prometheus/blob/release-2.13/config/testdata/conf.good.yml#L146 has a regex capture group, violating vanilla label_name definition.","type":"string"},"regex":{"$comment":"https://github.com/prometheus/prometheus/blob/release-2.13/config/testdata/conf.good.yml#L111 has integer instead of string","default":"(.*)"},"modulus":{"type":"integer"},"replacement":{"type":"string","default":"$1"},"action":{"type":"string","enum":["replace","keep","drop","hashmod","labelmap","labeldrop","labelkeep"],"default":"replace"}},"if":{"properties":{"action":{"const":"replace"}}},"then":{"required":["target_label"]}}},"tls_config":{"type":["object","null"],"properties":{"ca_file":{"$ref":"#/definitions/filepath"},"cert_file":{"$ref":"#/definitions/filepath"},"key_file":{"$ref":"#/definitions/filepath"},"server_name":{"type":["string","null"]},"insecure_skip_verify":{"type":["boolean","null"]}},"additionalProperties":false},"scheme":{"type":["string","null"],"enum":["http","https",null]},"azure_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"consul_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"digitalocean_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"docker_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"dockerswarm_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"dns_sd_configs":{"type":["array","null"],"items":{"type":"object","properties":{"names":{"type":"array","items":{"type":"string"},"minItems":1},"type":{"type":["string","null"],"enum":["SRV","A","AAAA"],"default":"SRV"},"port":{"type":["integer","null"]},"refresh_interval":{"$ref":"#/definitions/duration","default":"30s"}},"required":["names"],"additionalProperties":false}},"ec2_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"eureka_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"file_sd_configs":{"type":["array","null"],"items":{"type":"object","properties":{"files":{"type":"array","items":{"type":"string"},"minItems":1},"refresh_interval":{"$ref":"#/definitions/duration","default":"5m"}}}},"gce_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"hetzner_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"http_sd_configs":{"type":["array","null"],"items":{"type":"object","properties":{"url":{"type":"string","format":"uri-reference"},"refresh_interval":{"$ref":"#/definitions/duration","default":"60s"},"basic_auth":{"$ref":"#/definitions/basic_auth"},"authorization":{"$ref":"#/definitions/authorization"},"oauth2":{"$ref":"#/definitions/oauth2"},"bearer_token":{"$ref":"#/definitions/bearer_token"},"bearer_token_file":{"$ref":"#/definitions/bearer_token_file"},"proxy_url":{"type":["string","null"],"format":"uri-reference"},"follow_redirects":{"type":["boolean","null"],"default":true},"tls_config":{"$ref":"#/definitions/tls_config"}},"required":["url"],"allOf":[{"$ref":"#/definitions/auth"}],"additionalProperties":false}},"kubernetes_sd_configs":{"type":["array","null"],"items":{"type":"object","properties":{"api_server":{"type":["string","null"],"format":"uri-reference"},"role":{"type":"string","enum":["endpoints","service","pod","node","ingress"]},"kubeconfig_file":{"$ref":"#/definitions/filepath"},"basic_auth":{"$ref":"#/definitions/basic_auth"},"authorization":{"$ref":"#/definitions/authorization"},"oauth2":{"$ref":"#/definitions/oauth2"},"bearer_token":{"$ref":"#/definitions/bearer_token"},"bearer_token_file":{"$ref":"#/definitions/bearer_token_file"},"proxy_url":{"type":["string","null"],"format":"uri-reference"},"follow_redirects":{"type":["boolean","null"],"default":true},"tls_config":{"$ref":"#/definitions/tls_config"},"namespaces":{"type":["object","null"],"properties":{"own_namespace":{"type":"boolean"},"names":{"type":"array","items":{"type":"string"}}},"additionalProperties":false},"selectors":{"type":["array","null"],"items":{"type":"object","properties":{"role":{"type":"string"},"label":{"type":["string","null"]},"field":{"type":["string","null"]}},"required":["role"],"additionalProperties":false}}},"allOf":[{"$ref":"#/definitions/auth"}],"additionalProperties":false}},"kuma_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"lightsail_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"linode_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"marathon_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"nerve_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"openstack_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"puppetdb_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"scaleway_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"serverset_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"triton_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"uyuni_sd_configs":{"type":["array","null"],"items":{"type":"object"}},"static_configs":{"type":["array","null"],"items":{"type":"object","properties":{"targets":{"type":["array","null"],"items":{"type":"string"}},"labels":{"$ref":"#/definitions/labels"}}}}}}